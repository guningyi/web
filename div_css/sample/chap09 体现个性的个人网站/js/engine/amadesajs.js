var AmConstant={COOKIE_NAME:"amcd",MAX_COOKIE_LENGTH:2040,TIME_OUT_COOKIE_NAME:"amtmot",EXELATE_COOKIE_NAME:"amexl",TIME_OUT_TOLLERANCE:15000,MAX_CATEGORIE_LENGTH:512000,CATEGORIE_SEPARATOR:",",COOKIE_US_NAME:"amcus",COOKIE_NAME_TEST_SERVER:"amts",SLOT_TOP:"amTop",PROTOCOL_HTTP:"http:",PROTOCOL_HTTPS:"https:",DOMAIN:"srv.amadesa.com",ADMIN_DOMAIN:"manage.amadesa.com",DIRECT_APPS_REFRESH_NAME:"/direct/staticgen",DIRECT_APPS_REFRESH_COMMAND_NAME:"regenTestLazy",DIRECT_APPS_CHECK_REFRESH_COMMAND_NAME:"regenTestCheck",APP_NAME:"/Interaction2/app",INT_PRODUCTS:"/Interaction2/products",INT_COUNTER:"/Interaction2/counter",PRODUCT_COLLECT:"collect",SLOT_PPID:"0",CONTENT_HIDE:1,CONTENT_BLOCK:2,TEST_SERVER:"amtestserver",LIVE_SERVER:"amliveserver",PRODUCT_BASE_TEMPLATE:".base_template",PRODUCT_TEMPLATE:".product_template",AM_DEBUG:"amdebug",AM_CONTROL_EMPTY_CONTENT:"AM_CONTROL_EMPTY_CONTENT",AM_TEST_APP_REFRESH_REQUIRED:"REFRESH_REQUIRED",AM_TEST_APP_REFRESH_DIVS_DISPLAY_TIME:1000,Alias:{STATIC_URL:"%%SERVER_URL%%",COUNTER_URL:"%%SERVER_COUNTER_URL%%",USER_ID:"[USER_ID]",VISIT_ID:"[VISIT_ID]",HITS_COUNTER:"[HITS_COUNTER]",PROFILE_ID:"[PROFILE_ID]",EG_ID:"[EG_ID]"},ProtocolType:{HTTP:"0",HTTPS:"1"},TestType:{BEST_NEXT_ACTION:1,AB_TESTING:2,MULTI_VARIANT:3,BEHAVIORAL_TARGETING:4,RECOMMENDATION:5}};var AmUtil={getProtocol:function(){var A=AmConstant.PROTOCOL_HTTP;if(document.location.protocol==AmConstant.PROTOCOL_HTTPS){A=AmConstant.PROTOCOL_HTTPS}return A},getProtocolType:function(){var A=AmConstant.ProtocolType.HTTP;if(document.location.protocol==AmConstant.PROTOCOL_HTTPS){A=AmConstant.ProtocolType.HTTPS}return A},getDomain:function(){return window.amDomainForced?window.amDomainForced:AmConstant.DOMAIN},getAppName:function(){return window.amAppNameForced?window.amAppNameForced:AmConstant.APP_NAME},getCounterURL:function(){return window.amDomainForced?this.assembleCounterURL():AmResponse.serverCounterURL},assembleCounterURL:function(){return AmUtil.getProtocol()+"//"+window.amDomainForced+AmConstant.INT_COUNTER+"?"},getCDomain:function(){var A="";if(window.amCDomainForced){A=";domain="+window.amCDomainForced}return A},getCookieExp:function(){var A=AmConstant.COOKIE_EXP;if(window.amCookieExpForced){A=window.amCookieExpForced}return A},getRandom:function(){return Math.ceil(Math.random()*10000000000000)},getScriptTag:function(A){return'<script language="javascript" src="'+A+'"><\/script>'},appendCss:function(B){B=this.convertAliases(B);var A=document.createElement("link");A.rel="stylesheet";A.href=B;var C=document.getElementsByTagName("head")[0];if(C){C.appendChild(A)}return A},appendStyle:function(D){var A=document.createElement("style");A.setAttribute("type","text/css");if(A.styleSheet){A.styleSheet.cssText=D}else{var B=document.createTextNode(D);A.appendChild(B)}var C=document.getElementsByTagName("head")[0];if(C){C.appendChild(A)}return A},isNumber:function(A){var B=A.toString().replace(/\,/g,"");return isFinite(B)},relplaceQuots:function(A){if(A){A=A.replace(/\'/g,"&#039;")}return A},replaceAll:function(A,E,C){var D=0;var B="";while(A.indexOf(E,D)!=-1){B+=A.substring(D,A.indexOf(E,D));B+=C;D=(A.indexOf(E,D)+E.length)}B+=A.substring(D,A.length);return B},getFirstResultOfRegExp:function(C,D){var A=AmUtil.runRegExp(C,D);var B;if(A&&A.length>1){B=A[1]}return B},runRegExp:function(B,C){var A=new RegExp(C,"g");return A.exec(B)},convertAliases:function(G,B){G=this.replaceAll(G,AmConstant.Alias.STATIC_URL,AmResponse.serverStaticURL);G=this.replaceAll(G,AmConstant.Alias.COUNTER_URL,this.getCounterURL());G=this.replaceAll(G,AmConstant.Alias.USER_ID,AmManager.getUserIDServerIDValue());G=this.replaceAll(G,AmConstant.Alias.VISIT_ID,AmCookie.visitID);G=this.replaceAll(G,AmConstant.Alias.HITS_COUNTER,AmCookie.hitsCounter);G=this.replaceAll(G,AmConstant.Alias.PROFILE_ID,AmCookie.profileID);if(B){G=this.replaceAll(G,AmConstant.Alias.EG_ID,B)}var F=/href.*?Interaction2\/counter.*?&red=[^\"]+/gi;var D=F.exec(G);while(D){var H=D.toString();var A=H.split("&red=");var J=A[0];for(var C=1;C<A.length;C=C+1){var E=A[C];if(E.match(/.*:.*/)){E=window.encodeURIComponent(E)}J+="&red="+E}var I=G.indexOf(H);G=G.substring(0,I)+J+G.substring(I+H.length);D=F.exec(G)}return G},counterIntervalImageRequest:0,sendImageRequest:function(C,A){var B=function(){var D=new Image();if(A){D.onload=A;D.onerror=A}C+="&rd="+AmUtil.getRandom();D.src=C;if(AmJSCookie.get(AmConstant.TIME_OUT_COOKIE_NAME)){D.src=location.href}};setTimeout(B,this.counterIntervalImageRequest);this.counterIntervalImageRequest+=100},attachEvent:function(C,A,B){if(C.addEventListener){C.addEventListener(A,B,false)}else{if(C.attachEvent){C.attachEvent("on"+A,B)}}},getQueryStringParam:function(A){return this.getQueryStringParamByURL(window.location.href,A)},getQueryStringParamByURL:function(B,A){var E="";var D=A+"=([^&]+)";var F=new RegExp(D,"i");var C=F.exec(B);if(C&&C[1]){E=C[1]}return E},getQueryStringHash:function(G){var F=new AmHash();var E=/[^=|&]+/g;var C=G.match(E);for(var B=0;B<C.length;B=B+2){var A=C[B];var D=C[B+1];F.set(A,D)}return F}};var AmJSCookie={set:function(C,D,E,A){var B=E?"":"Thu, 8 Oct 2201 15:59:28 UTC ";this.setWithExpiration(C,D,B,A)},setWithExpiration:function(C,E,F,A){var D=(A==undefined||A===true)?AmUtil.getCDomain():"";var B=F?";expires="+F:"";E=(E==undefined)?"":E;document.cookie=C+"="+escape(E)+B+D+"; path=/"},get:function(A){var B;var C="";if(document.cookie.length>0){B=document.cookie.lastIndexOf(A);if(B!=-1){B+=A.length;end=document.cookie.indexOf(";",B);if(end==-1){end=document.cookie.length}C=unescape(document.cookie.substring(B+1,end))}}return C},getCookieEnabled:function(){var A="0";if(typeof (navigator.cookieEnabled)!="undefined"){A=navigator.cookieEnabled?"0":"2"}if(A!="2"){AmJSCookie.set(AmConstant.COOKIE_US_NAME,"testUS",true,false);if(AmJSCookie.get(AmConstant.COOKIE_US_NAME).length<2){A="2"}AmJSCookie.set(AmConstant.COOKIE_US_NAME,"",true,false)}return A}};function AmHash(){this.items={};this.length=0;this.hasKey=function(A){return(A in this.items)};this.get=function(A){return(this.hasKey(A))?this.items[A]:null};this.set=function(A,B){if(!this.hasKey(A)){this.length++}this.items[A]=B};this.remove=function(A){if(this.hasKey(A)){delete this.items[A];this.length--}};this.empty=function(){this.items={};this.length=0}}var AmBase64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(C){var A="";var J,H,F,I,G,E,D;var B=0;C=AmBase64._utf8_encode(C);while(B<C.length){J=C.charCodeAt(B++);H=C.charCodeAt(B++);F=C.charCodeAt(B++);I=J>>2;G=((J&3)<<4)|(H>>4);E=((H&15)<<2)|(F>>6);D=F&63;if(isNaN(H)){E=D=64}else{if(isNaN(F)){D=64}}A=A+this._keyStr.charAt(I)+this._keyStr.charAt(G)+this._keyStr.charAt(E)+this._keyStr.charAt(D)}return A},decode:function(C){var A="";var J,H,F;var I,G,E,D;var B=0;C=C.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(B<C.length){I=this._keyStr.indexOf(C.charAt(B++));G=this._keyStr.indexOf(C.charAt(B++));E=this._keyStr.indexOf(C.charAt(B++));D=this._keyStr.indexOf(C.charAt(B++));J=(I<<2)|(G>>4);H=((G&15)<<4)|(E>>2);F=((E&3)<<6)|D;A=A+String.fromCharCode(J);if(E!=64){A=A+String.fromCharCode(H)}if(D!=64){A=A+String.fromCharCode(F)}}A=AmBase64._utf8_decode(A);return A},_utf8_encode:function(B){B=B.replace(/\r\n/g,"\n");var A="";for(var D=0;D<B.length;D++){var C=B.charCodeAt(D);if(C<128){A+=String.fromCharCode(C)}else{if((C>127)&&(C<2048)){A+=String.fromCharCode((C>>6)|192);A+=String.fromCharCode((C&63)|128)}else{A+=String.fromCharCode((C>>12)|224);A+=String.fromCharCode(((C>>6)&63)|128);A+=String.fromCharCode((C&63)|128)}}}return A},_utf8_decode:function(A){var B="";var C=0;var D=c1=c2=0;while(C<A.length){D=A.charCodeAt(C);if(D<128){B+=String.fromCharCode(D);C++}else{if((D>191)&&(D<224)){c2=A.charCodeAt(C+1);B+=String.fromCharCode(((D&31)<<6)|(c2&63));C+=2}else{c2=A.charCodeAt(C+1);c3=A.charCodeAt(C+2);B+=String.fromCharCode(((D&15)<<12)|((c2&63)<<6)|(c3&63));C+=3}}}return B}};var AmCookie={userID:"",visitID:0,profileID:"1",hitsCounter:0,timeStamp:0,serverID:"",version:-1,get:function(){return AmJSCookie.get(AmConstant.COOKIE_NAME)},save:function(A){AmJSCookie.set(AmConstant.COOKIE_NAME,A)}};function AmContent(A){this.slotName=A;this.testID;this.testType;this.webletID;this.egID;this.data=[];this.type;this.add=function(B){this.data.push(B)};this.getHTML=function(){var F="";if(this.testID&&this.webletID){var D=this.testID+"."+this.webletID;var E=AmResponse.results.get(D);if(E){F=E.egID}}var B="";for(var C=0;C<this.data.length;C++){B+=this.data[C]}B=AmUtil.convertAliases(B,F);return B}}function AmEvent(B,D,A,C){this.slotName=B;this.url=D;this.testID=A;this.webletID=C;this.send=function(){var E=this.testID+"."+this.webletID;var F=AmResponse.results.get(E);if(!F){F=AmResponse.productsRecom.get(E)}if(F){this.url=AmUtil.convertAliases(this.url,F.egID);var G=false;G=F.isRequest;this.url+="&iwr="+(G?"1":"0");this.url+=AmManager.getTimeStampParam();AmUtil.sendImageRequest(this.url,null)}}}var AmContentManager={contents:new AmHash(),events:new AmHash(),crossSiteEvents:new AmHash(),attachContent:function(D,F,G,C,E,A,B){var H=this.contents.get(D);if(H){return }H=new AmContent(D);H.add(F);if(G){H.type=G}if(C){H.testID=C}if(E){H.webletID=E}if(A){H.egID=A}if(B){H.testType=B}this.contents.set(D,H)},attachEvent:function(C,E,B,D){var A=this.events.get(C);if(!A){A=new AmEvent(C,E,B,D)}this.events.set(C,A)},attachCrossSiteEvent:function(D,B,C){var A=this.crossSiteEvents.get(B);if(!A){A=new AmEvent("",D,B,C)}this.crossSiteEvents.set(B,A)},execute:function(B,F,D){var C=this.contents.get(B);if(C){if(AmConstant.AM_CONTROL_EMPTY_CONTENT!=C.getHTML()){this.executeContent(C,D);var A=this.events.get(B);if(A){A.send()}A=this.crossSiteEvents.get(C.testID);if(A){A.send();this.crossSiteEvents.remove(C.testID)}}}else{if(F&&!D){AmManager.serverRequest(AmConstant.SLOT_PPID,B)}else{if(!F){if(AmConstant.SLOT_TOP!=B){var E="#"+B+"{display:inline;}";AmUtil.appendStyle(E)}}}}},executeContent:function(oContent,isDHTML){var strHTML=oContent.getHTML();if(isDHTML){var oDiv=document.getElementById(oContent.slotName);if(oDiv){strHTML=this.removeWrapDiv(strHTML,oContent.slotName);oDiv.innerHTML=strHTML;var scriptsElements=oDiv.getElementsByTagName("Script");if(scriptsElements){for(var i=0;i<scriptsElements.length;i++){eval(scriptsElements[i].text)}}}}else{if(document.getElementById(oContent.slotName)){var controlContainsDivId=true}document.write(strHTML);if(oContent.type==AmConstant.CONTENT_HIDE){var strStyle="#"+oContent.slotName+"{display:none;}";AmUtil.appendStyle(strStyle)}else{if(oContent.type==AmConstant.CONTENT_BLOCK){document.write("<noscript>");var oContentTestId=oContent.testID;if(oContentTestId=="77"||oContentTestId=="48"||oContentTestId=="126"||oContentTestId=="56"){if(!controlContainsDivId){document.write("</noscript>")}}}}}},removeWrapDiv:function(D,B){if(D){var C='<div id="'+B+'">';var E=D.indexOf(C);var A=D.lastIndexOf("</div>");if(E!=-1&&E<A){D=D.substring(E+C.length,A)}}return D},getContent:function(A){return this.contents.get(A)},getTestContentWeblets:function(B,E){var C=[];if(B&&this.contents&&E){var F;var D=E.split(",");if(D){for(var A=0;A<D.length;A++){F=this.getContent(D[A]);if(F&&B==F.testID){C.push(F.webletID)}}}}return C}};var AmResponse={results:new AmHash(),productsRecom:new AmHash(),addResult:function(B){var A=B.testID+"."+B.webletID;this.results.set(A,B)},addProductRecom:function(B){var A=B.testID+"."+B.webletID;this.productsRecom.set(A,B)},set:function(key,value){eval("this."+key+"='"+value+"';")},setCookieParams:function(E,G,F,A,D,C,B){AmCookie.userID=E;AmCookie.visitID=G;AmCookie.profileID=F;AmCookie.hitsCounter=A;AmCookie.timeStamp=D;AmCookie.serverID=C;if(B){AmCookie.version=B}}};function AmResponseResult(E,D,G,B,C,F,A,H){this.testType=E;this.testID=D;this.webletID=G;this.egID=B;this.plID=C;this.cookieExp=F;this.commands=A;this.isRequest=H}function AmResponseProductRecom(B,A,D,E,C){this.testID=B;this.egID=A;this.amadesaIDs=D;this.isRequest=E;this.webletID=C}var AmResponseManager={execute:function(){if(AmManager.timeOutCall){clearTimeout(AmManager.timeOutCall)}if(AmConstant.SLOT_TOP==AmResponse.slotName&&window.amPid&&window.amProductId){var A=AmManager.serverRequestProducts;if(AmResponse.secure&&AmResponse.secure=="true"){A=AmManager.serverRequestSecureProducts}AmUtil.attachEvent(window,"load",A)}AmCookie.save(AmResponse.cookie);for(var C in AmResponse.productsRecom.items){var B=AmResponse.productsRecom.items[C];if(B instanceof AmResponseProductRecom){this.executeProductRecom(B)}}AmContentManager.execute(AmResponse.slotName,false,false);AmResponse.productsRecom=new AmHash()},executeProductRecom:function(oProductRecom){var oContentTemplateBase=AmContentManager.contents.get(AmResponse.slotName+AmConstant.PRODUCT_BASE_TEMPLATE);var oContentTemplateProduct=AmContentManager.contents.get(AmResponse.slotName+AmConstant.PRODUCT_TEMPLATE);var strHTMLTemplateBase="";var strHTMLTemplateProduct="";var arrProducts=[];var templateBaseTestId;var templateBaseWebletId;var templateBaseType;if(oContentTemplateBase){strHTMLTemplateBase=oContentTemplateBase.getHTML();templateBaseTestId=oContentTemplateBase.testID;templateBaseWebletId=oContentTemplateBase.webletID;templateBaseType=oContentTemplateBase.type}else{strHTMLTemplateBase=eval("window.testProductBaseTemplate_"+oProductRecom.testID)}if(oContentTemplateProduct){strHTMLTemplateProduct=oContentTemplateProduct.getHTML()}else{strHTMLTemplateProduct=eval("window.testProductTemplate_"+oProductRecom.testID)}for(var i=0;i<oProductRecom.amadesaIDs.length;i++){var oProduct=eval("window.product_"+oProductRecom.amadesaIDs[i]);if(oProduct){arrProducts.push(oProduct)}}var strFullRecomHTML=strHTMLTemplateBase?strHTMLTemplateBase:"";if(strHTMLTemplateProduct&&strHTMLTemplateBase){var strProductTemplates="";for(var i=0;i<arrProducts.length;i++){var oProduct=arrProducts[i];var strProductTemplate=strHTMLTemplateProduct;strProductTemplate=strProductTemplate.replace(/\$prodcut_id/g,oProduct.id);strProductTemplate=strProductTemplate.replace(/\$product_id/g,oProduct.id);strProductTemplate=strProductTemplate.replace(/\$product_index/g,i);strProductTemplate=strProductTemplate.replace(/\$product_title/g,oProduct.title);strProductTemplate=strProductTemplate.replace(/\$product_description/g,oProduct.description);strProductTemplate=strProductTemplate.replace(/\$product_image/g,oProduct.image);strProductTemplate=strProductTemplate.replace(/\$product_link/g,this.getProductRecomClickURL(oProductRecom.testID,oProductRecom.egID,oProduct.id,oProduct.link,templateBaseWebletId));strProductTemplate=AmPR.executeProductCurrency(oProduct,strProductTemplate);strProductTemplates+=strProductTemplate}strFullRecomHTML=strHTMLTemplateBase.replace(/\$recommendation_products/g,strProductTemplates)}AmContentManager.attachContent(AmResponse.slotName,strFullRecomHTML,templateBaseType,templateBaseTestId,templateBaseWebletId)},getProductRecomClickURL:function(C,A,F,E,D){var G="";var B="";if(D&&D!=""&&D!="0"){G="&evt=8,w,"+D;B=D}else{G="&evt=8,t,"+C}return AmConstant.Alias.COUNTER_URL+"pid="+amPid+AmManager.getUIDParam()+AmManager.getTimeStampParam()+"&vsid="+AmConstant.Alias.VISIT_ID+"&hc="+AmConstant.Alias.HITS_COUNTER+"&prid="+AmConstant.Alias.PROFILE_ID+"&tid="+C+"&ttype="+AmConstant.TestType.RECOMMENDATION+"&egid="+A+"&wid="+B+G+"&pctid="+F+"&red="+E}};function AmCurrencyProduct(A){this.productId="";this.displayPrice="";this.listPrice="";this._parse=function(B,C){if(AmUtil.isNumber(B)){this.displayPrice=B}else{this.displayPrice=AmUtil.getQueryStringHash(B)}if(AmUtil.isNumber(C)){this.listPrice=C}else{this.listPrice=AmUtil.getQueryStringHash(C)}};this._init=function(B){this.productId=B.id;this._parse(B.displayPrice,B.listPrice)};this._init(A)}var AmPR={CURRENCIES:{USD:"&#36;",EUR:"&#128;",GBP:"&#163;",CAD:"&#36;",NIS:"&#8362;"},RECOM_CURRENCY_VAR:"amRecomCurrency",executeProductCurrency:function(B,C){var A=new AmCurrencyProduct(B);C=this.replaceTemplate(C,A,"display",true);C=this.replaceTemplate(C,A,"list",true);C=this.replaceTemplate(C,null,"",false);C=C.replace(/\$product_display_price/g,this.getProductPrice(A,"","display",true));C=C.replace(/\$product_list_price/g,this.getProductPrice(A,"","list",true));return C},replaceTemplate:function(A,H,E,C){var F="";var D="";if(C){D="\\$product_"+E+"_price"}else{D="\\$product_price_symbol"}F=D+"\\[([^\\]]*)\\]";var B=new RegExp(F,"g");var G=B.exec(A);while(G){var I="";if(C){I=this.getProductPrice(H,G[1],E,false)}else{I=this.getProductPriceSymbol(G[1])}A=A.replace(G[0],I);G=B.exec(A)}return A},getCurrency:function(currency){if(currency==this.RECOM_CURRENCY_VAR){currency=eval("window."+this.RECOM_CURRENCY_VAR)}return currency},getProductPrice:function(currencyProduct,currency,identifier,basePrice){var retVal="";currency=this.getCurrency(currency);var price=eval("currencyProduct."+identifier+"Price");if(AmUtil.isNumber(price)){if(basePrice){retVal=price}}else{if(price.hasKey(currency)){retVal=price.get(currency)}}return retVal},getProductPriceSymbol:function(currency){currency=this.getCurrency(currency);if(currency){currency=eval("AmPR.CURRENCIES."+currency)}if(!currency){currency=""}return currency}};function liveExperience(A,B){if(!AmManager.checkGomezFromEntrenceURL()){AmContentManager.execute(A,true,B)}}function amCrossDomain(A){var C=A;var B=AmCookie.get();if(A&&B){C+=(A.indexOf("&")==-1&&A.indexOf("?")==-1)?"?":"&";C+=AmConstant.COOKIE_NAME+"="+B}if(C.length>AmConstant.MAX_COOKIE_LENGTH){return A}else{return C}}function amReportCompletion(C,B){if(AmManager.checkGomezFromEntrenceURL()){if(B){B()}return }if(C){var A=AmManager.getRequestURL(C,AmConstant.SLOT_TOP);AmUtil.sendImageRequest(A,B)}}function amReportClick(A,C){if(AmManager.checkGomezFromEntrenceURL()){if(C){C()}return }if(amPid&&A){var B=AmManager.getClickRequestURL(A);AmUtil.sendImageRequest(B,C)}}function amBtContentClicked(F,B,G){AmManager.amBtContentClickedCallBackFunction=B;var D="";if(G&&F){var C=AmUtil.getFirstResultOfRegExp(F,"&tid=([0-9]+)");if(C){var A=AmUtil.getFirstResultOfRegExp(F,"&evt=8,w,([0-9]+)");var I=AmContentManager.getTestContentWeblets(C,G);if(I){for(var E=0;E<I.length;E++){if(!A||A!=I[E]){D=D+"&evt=8,w,"+I[E]}}}}}var H=document.createElement("script");H.type="text/javascript";H.src=F+D+"&btclck=1&ck="+AmCookie.get()+"&us="+(window.amCheckThirdParty?"2":AmJSCookie.getCookieEnabled());document.body.appendChild(H)}var AmManager={timeOutCall:false,exelateTimeOutCall:false,bodyStyleOverflow:"",refreshDivsInsertionTime:-1,amBtContentClickedCallBackFunction:"",init:function(){if(this.checkGomezFromEntrenceURL()){return }this.setTestLiveServerCookie();if(this.isTestServer()&&window.amPid&&window.amPid!="220"){this.loadRefreshTestServerDivs()}else{if(window.amCheckThirdParty&&window.amPid){this.checkThirdPartyRequest()}else{this.topCall()}}},callBtCallBackFunc:function(){if(this.amBtContentClickedCallBackFunction){this.amBtContentClickedCallBackFunction()}},setRequestTimeout:function(){if(this.isTestServer()){return }if(this.timeOutCall){clearTimeout(AmManager.timeOutCall)}this.timeOutCall=setTimeout(function(){AmJSCookie.set(AmConstant.TIME_OUT_COOKIE_NAME,"true",true);location.reload(false)},window.amJSTimeout?window.amJSTimeout:AmConstant.TIME_OUT_TOLLERANCE)},topCall:function(){if(this.isTestServer()){this.clearRefreshTestServerDivs()}if(window.amPid){this.callExelate();this.serverRequest()}},setExelateAmParams:function(A){if(A&&A!="true"){window.amParams=window.amParams?(window.amParams+"&"+A):A}},callExelate:function(){if(window.amPid=="205"){var A=AmJSCookie.get(AmConstant.EXELATE_COOKIE_NAME);if(!A){this.exelateTimeOutCall=setTimeout(function(){AmManager.saveExelateContent();location.reload(false)},window.amJSTimeout?window.amJSTimeout:AmConstant.TIME_OUT_TOLLERANCE);document.write(AmUtil.getScriptTag("http://load.exelator.com/load/?p=104&g=030&j=j"))}else{this.setExelateAmParams(A)}}},saveExelateContent:function(){var A=window.amExternalData?window.amExternalData:"true";var B=new Date();B.setDate(B.getDate()+1);AmJSCookie.setWithExpiration(AmConstant.EXELATE_COOKIE_NAME,A,B.toGMTString());AmManager.setExelateAmParams(A)},checkGomezFromEntrenceURL:function(){var B=false;var A=window.location.href;if(A&&(A.indexOf("Gomez=true"))!=-1){B=true}return B},checkThirdPartyRequest:function(){var A=AmUtil.getProtocol()+"//"+AmUtil.getDomain()+AmUtil.getAppName()+"?proto="+AmUtil.getProtocolType()+"&pid="+amPid+"&chtpc=true";if(!AmJSCookie.get(AmConstant.TIME_OUT_COOKIE_NAME)){this.setRequestTimeout();document.write(AmUtil.getScriptTag(A))}},loadRefreshTestServerDivs:function(){var A='<script language="javascript">AmManager.checkRefreshTestServerAppsRequest();<\/script>';document.write(A)},onResizeRefreshTestServerDivs:function(){if(document.getElementById("amTestServerAppsRefreshMessageText")){if(Math.round(document.body.clientHeight/2)>150){document.getElementById("amTestServerAppsRefreshMessageText").style.top=Math.round(document.body.clientHeight/2)-150+"px"}else{document.getElementById("amTestServerAppsRefreshMessageText").style.top="0px"}if(Math.round(document.body.clientWidth/2)>400){document.getElementById("amTestServerAppsRefreshMessageText").style.left=Math.round(document.body.clientWidth/2)-400+"px"}else{document.getElementById("amTestServerAppsRefreshMessageText").style.left="0px"}}},buildRefreshTestServerDivs:function(){var B="#amTestServerAppsRefreshBackground {background-color: white;opacity: 0.3;filter: alpha(opacity=30);width: 100%;height: 100%; position: absolute;top: 0px;left: 0px;}#amTestServerAppsRefreshMessageText {background-color: white ;border-style:solid;border-width:2px; border-color: #026899; position: absolute;top: 0px;left: 0px;}";AmUtil.appendStyle(B);document.write('<div id="amTestServerAppsRefreshBackground">&nbsp;</div>');var C='<div id="amTestServerAppsRefreshMessageText" style="text-align: center; width: 800px ;height: 200px;"><div style="margin-top: 50px;"><span style="color: #026899; font-family:verdana; font-size: 22px; font-weight: normal; text-decoration: none; vertical-align: middle;">You are viewing an Amadesa Test Link</span></div><div style="margin-top: 20px;margin-bottom: 20px;"><span style="color: #3D3D3D; font-family:verdana; font-size: 16px; font-weight: normal; line-height: 17px;">We are generating the required files for your test. This may take several minutes.<br/>Once the test is ready, you will be redirected to the page.</span></div></div>';document.write(C);var A=new Date();AmManager.refreshDivsInsertionTime=A.getTime()},placeRefreshTestServerDivs:function(){this.onResizeRefreshTestServerDivs();if(document.getElementById("amTestServerAppsRefreshMessageText")){AmUtil.attachEvent(window,"resize",AmManager.onResizeRefreshTestServerDivs);AmManager.bodyStyleOverflow=document.body.style.overflow;document.body.style.overflow="hidden"}},clearRefreshTestServerDivs:function(){this.waitingForRefreshDivsRemoval();var A=document.getElementById("amTestServerAppsRefreshBackground");this.removeRefreshTestServerDiv(A);A=document.getElementById("amTestServerAppsRefreshMessageText");this.removeRefreshTestServerDiv(A);document.body.style.overflow=AmManager.bodyStyleOverflow},waitingForRefreshDivsRemoval:function(){if(AmManager.refreshDivsInsertionTime>-1){var A;var B=true;while(B){A=new Date().getTime();if((A-AmManager.refreshDivsInsertionTime)>AmConstant.AM_TEST_APP_REFRESH_DIVS_DISPLAY_TIME){B=false;AmManager.refreshDivsInsertionTime=-1}}}},removeRefreshTestServerDiv:function(A){if(A){if(A.removeNode){A.removeNode(true)}else{if(A.parentNode&&A.parentNode.removeChild){A.parentNode.removeChild(A)}else{A.style.display="none"}}}},checkRefreshTestServerAppsRequest:function(){var A=this.buildRefreshTestServerAppsRequest(AmConstant.DIRECT_APPS_CHECK_REFRESH_COMMAND_NAME);document.write(AmUtil.getScriptTag(A))},refreshTestServerAppsRequest:function(A){if(A==AmConstant.AM_TEST_APP_REFRESH_REQUIRED){this.buildRefreshTestServerDivs();this.placeRefreshTestServerDivs();var B=this.buildRefreshTestServerAppsRequest(AmConstant.DIRECT_APPS_REFRESH_COMMAND_NAME);document.write(AmUtil.getScriptTag(B))}else{this.topCall()}},buildRefreshTestServerAppsRequest:function(A){var D=window.location.href;var C="";if(D){var B=D.indexOf("amtestid=");if(B!=-1){var E=D.indexOf("&",B);E=E==-1?D.length:E;C="&testid="+D.substring(B+9,E)}}return AmUtil.getProtocol()+"//"+AmConstant.ADMIN_DOMAIN+AmConstant.DIRECT_APPS_REFRESH_NAME+"?commandId="+A+"&pid="+window.amPid+C+"&ts="+AmUtil.getRandom()},setTestLiveServerCookie:function(){if(this.checkURLTestServer()){AmJSCookie.set(AmConstant.COOKIE_NAME_TEST_SERVER,"1",true,true)}if(window.location.href.indexOf(AmConstant.LIVE_SERVER)!=-1){AmJSCookie.set(AmConstant.COOKIE_NAME_TEST_SERVER,"",true)}},isTestServer:function(){return this.checkURLTestServer()||this.checkCookieTestServer()},checkURLTestServer:function(){return window.location.href.indexOf(AmConstant.TEST_SERVER)!=-1},checkCookieTestServer:function(){return AmJSCookie.get(AmConstant.COOKIE_NAME_TEST_SERVER)=="1"},getTestServerParam:function(){return this.checkCookieTestServer()?"&"+AmConstant.TEST_SERVER+"="+AmConstant.TEST_SERVER:""},getAmDebugParam:function(){return window.location.href.indexOf(AmConstant.AM_DEBUG)!=-1?"&"+AmConstant.AM_DEBUG+"=true":""},getUserIDServerIDValue:function(E){var F=E?E:AmCookie.get();var C="";if(F){var H=F.split("@");var G=H[0];var A=G.split(",");var D=A[0];var B;if(A.length>5&&A[1]&&A[1]!=""){B=A[1]}C=B?D+"."+B:D}else{C=AmCookie.serverID?AmCookie.userID+"."+AmCookie.serverID:AmCookie.userID}return C},getUIDParam:function(A){return"&uid="+this.getUserIDServerIDValue(A)},getTimeStampParam:function(){return"&ts="+AmCookie.timeStamp},getFirstCategory:function(){var A=window.amCategory;if(A){var B=A.indexOf(",");A=B==-1?A:A.substring(0,B)}return A},getCategoryStr:function(){var B="";if(window.amCategory){B=window.amCategory;if(B.length>AmConstant.MAX_CATEGORIE_LENGTH){var A=B.split(AmConstant.CATEGORIE_SEPARATOR);for(i=0;i<A.length;i++){if((B+A[i])<=AmConstant.MAX_CATEGORIE_LENGTH){B+=A[i]}}}B=window.encodeURIComponent(AmBase64.encode(AmUtil.relplaceQuots(B)))}return B},getCookieFromEntrenceURL:function(){var C=new Array();var B=window.location.href;if(B){var A=B.indexOf(AmConstant.COOKIE_NAME+"=");C.en=A==-1?escape(B):escape(B.substring(0,A-1));if(A!=-1){C[AmConstant.COOKIE_NAME]=B.substring(A+5,B.length)}}return C},getRequestURL:function(E,G){var D=this.getCookieFromEntrenceURL();var F=AmUtil.getProtocol()+"//"+AmUtil.getDomain()+AmUtil.getAppName()+"?proto="+AmUtil.getProtocolType()+"&pid="+amPid+"&ck="+(D[AmConstant.COOKIE_NAME]?D[AmConstant.COOKIE_NAME]:AmCookie.get())+"&us="+(window.amCheckThirdParty?"2":AmJSCookie.getCookieEnabled())+"&en="+D.en+"&rp="+escape(document.referrer);if(E||window.amPPid){F+="&ppid="+(E?E:amPPid)}F+="&slot="+(G?G:AmConstant.SLOT_TOP);F+=(G?"":"&res=r"+screen.width+"x"+screen.height);F+=(G?"":"&gmt="+new Date().getTimezoneOffset()/60*(-1));F+=this.getTestServerParam();F+=this.getAmDebugParam();if(window.amParams){F+="&jsp="+escape(amParams)}if(window.amRevenue){F+="&rev="+escape(amRevenue)}else{if(window.amOrderId){var C=window.amTotalOrder?("&totalOrder="+window.amTotalOrder):"";var A=window.amProductList?("&productId="+window.amProductList):"";F+="&rev="+escape("orderId="+amOrderId+C+A)}}if(window.amCategory){F+="&cat="+this.getCategoryStr()}if(window.amCart){F+="&cart="+amCart}if(window.amRecomRetarget){F+="&rtrgt="+amRecomRetarget}if(window.amRecomMax){F+="&recmax="+amRecomMax}if(window.amRecomMin){F+="&recmin="+amRecomMin}if(window.amRecomMode){F+="&recmode="+amRecomMode}if(window.amProductId){F+="&pctid="+amProductId}if(window.amUserId){F+="&userid="+amUserId}var B=AmUtil.getQueryStringParam("amuc");if(B){F+="&amuc="+B}F+=this.getUIDParam(D[AmConstant.COOKIE_NAME]);F+="&rd="+AmUtil.getRandom();return F},getClickRequestURL:function(D){var A=AmContentManager.getContent(D);if(!A){return }var B=this.getCookieFromEntrenceURL();var C=AmUtil.getProtocol()+"//"+AmConstant.DOMAIN+AmConstant.INT_COUNTER+"?&pid="+amPid;C+=this.getUIDParam(B[AmConstant.COOKIE_NAME]);C+="&vsid="+AmCookie.visitID;C+="&hc="+AmCookie.hitsCounter;C+="&prid="+AmCookie.profileID;C+="&egid="+A.egID;C+="&tid="+A.testID;C+="&ttype="+A.testType;C+="&wid="+A.webletID;C+="&evt=8,w,"+A.webletID;C+=this.getTestServerParam();return C},serverRequest:function(C,E){if(!E&&!C&&this.exelateTimeOutCall){var B='clearTimeout(AmManager.exelateTimeOutCall);AmManager.exelateTimeOutCall = "";AmManager.saveExelateContent();var strURL = AmManager.getRequestURL();if (!AmJSCookie.get(AmConstant.TIME_OUT_COOKIE_NAME)) {AmManager.setRequestTimeout();document.write(AmUtil.getScriptTag(strURL));}';var A='<script language="javascript">'+B+"<\/script>";document.write(A)}else{var D=this.getRequestURL(C,E);if(!AmJSCookie.get(AmConstant.TIME_OUT_COOKIE_NAME)){this.setRequestTimeout();document.write(AmUtil.getScriptTag(D))}}},getProductsRequestURL:function(A){return AmUtil.getProtocol()+"//"+AmUtil.getDomain()+AmConstant.INT_PRODUCTS+"?pid="+amPid+((window.amProductId)?("&pctid="+amProductId):"")+this.getProductsDataRequestURL(A)+"&cat="+this.getCategoryStr()+this.getUIDParam()+this.getTimeStampParam()},getProductsDataRequestURL:function(A){var B="";if(A){B="&pctdat="+window.amProductData}else{B="&pimg="+(window.amProductImg?escape(window.amProductImg):"")+"&plink="+(window.amProductLink?escape(window.amProductLink):"")+"&ptitle="+(window.amProductTitle?window.encodeURIComponent(AmBase64.encode(AmUtil.relplaceQuots(window.amProductTitle))):"")+"&pdesc="+(window.amProductDesc?window.encodeURIComponent(AmBase64.encode(AmUtil.relplaceQuots(window.amProductDesc))):"")+"&pdprice="+(window.amProductDisplayPrice?escape(window.amProductDisplayPrice):"")+"&plprice="+(window.amProductListPrice?escape(window.amProductListPrice):"")+"&pstatus="+(window.amProductStatus?window.amProductStatus:"")}return B},serverRequestProductsInternal:function(A){var B=AmManager.getProductsRequestURL(A);AmUtil.sendImageRequest(B,null)},serverRequestProducts:function(){AmManager.serverRequestProductsInternal(false)},serverRequestSecureProducts:function(){if(window.amProductData){AmManager.serverRequestProductsInternal(true)}}};AmManager.init();